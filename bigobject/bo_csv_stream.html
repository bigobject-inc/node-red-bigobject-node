<script type="text/javascript">
    RED.nodes.registerType('BigObject CSV stream',{
        category: 'BigObject',
        color: '#ffffff',
        defaults: {
            name: {value:""},
	    boserver: {value:"", type:"boserver", required:true},
	    table: {value:""},
	    index: {value:"", required:true},
            skiprows: {value:""},
            encodingconv : {value:false},
            replacequote : {value:false},
            sourceencoding : {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "bo.png",
        label: function() {
            return this.name||"BigObject CSV stream";
        }
    });
</script>

<script type="text/x-red" data-template-name="BigObject CSV stream">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i>Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-boserver"><i class="fa fa-globe"></i>Server</label>
        <input type="text" id="node-input-boserver" placeholder="Server">
    </div>
    <div class="form-row">
        <label for="node-input-table"><i class="fa fa-briefcase"></i>Table</label>
        <input type="text" id="node-input-table" placeholder="Table">
    </div>
    <div class="form-row">
        <label for="node-input-index"><i class="icon-tag"></i>Index string</label>
        <input type="text" id="node-input-index" placeholder="Index">
	(start at 0, empty or * = all)
    </div>
    <div class="form-row">
        <label for="node-input-skiprows"><i class="icon-tag"></i>Skip first n rows</label>
	<input type="text" id="node-input-skiprows" placeholder="Index">
    </div>

    <br>
    Character encoding conversion:
    <br>
    If the checkbox is checked, use a Buffer in msg.payload as an input rather than a string.
    <div class="form-row">
        <label for="node-input-encodingconv"><i class="icon-tag"></i>Encoding conversion</label>
        <input type="checkbox" id="node-input-encodingconv" style="display: inline-block; width: auto; vertical-align: top;">
    </div>

    <div class="form-row">
        <label for="node-input-replacequote"><i class="icon-tag"></i>replace quote</label>
        <input type="checkbox" id="node-input-replacequote" style="display: inline-block; width: auto; vertical-align: top;">
    </div>

    <div class="form-row">
        <label for="node-input-sourceencoding"><i class="fa fa-tasks"></i>Source encoding</label>
        <select type="text" id="node-input-sourceencoding" style="width:70%;">
            <option value="big5">big5</option>
        </select>
    </div>

</script>

<script type="text/x-red" data-help-name="BigObject CSV stream">
    <p>A simple node that recevice csv streamming data from msg.payload</p>
    <p> ex. msg.payload='1,2,3,4,5\n6,7,8,9,0'</p>
    <p> The table name can be assigned in msg.table</p>
    <p></p>
</script>
